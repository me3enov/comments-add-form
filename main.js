(()=>{var t={705:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",o=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),o&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),o&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,o,r,i){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(o)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var u=0;u<t.length;u++){var l=[].concat(t[u]);o&&a[l[0]]||(void 0!==i&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),r&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=r):l[4]="".concat(r)),e.push(l))}},e}},742:t=>{"use strict";t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},738:t=>{"use strict";t.exports=function(t){return t[1]}},459:t=>{for(var e=[],n=0;n<256;++n)e[n]=(n+256).toString(16).substr(1);t.exports=function(t,n){var o=n||0,r=e;return[r[t[o++]],r[t[o++]],r[t[o++]],r[t[o++]],"-",r[t[o++]],r[t[o++]],"-",r[t[o++]],r[t[o++]],"-",r[t[o++]],r[t[o++]],"-",r[t[o++]],r[t[o++]],r[t[o++]],r[t[o++]],r[t[o++]],r[t[o++]]].join("")}},19:t=>{var e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(e){var n=new Uint8Array(16);t.exports=function(){return e(n),n}}else{var o=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}},246:(t,e,n)=>{var o=n(19),r=n(459);t.exports=function(t,e,n){var i=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var a=(t=t||{}).random||(t.rng||o)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e)for(var s=0;s<16;++s)e[i+s]=a[s];return e||r(a)}},567:(t,e,n)=>{"use strict";n.d(e,{Z:()=>k});var o=n(738),r=n.n(o),i=n(705),a=n.n(i),s=n(944),c=n(742),u=n.n(c),l=new URL(n(995),n.b),p=new URL(n(81),n.b),f=new URL(n(166),n.b),d=new URL(n(657),n.b),m=new URL(n(215),n.b),h=new URL(n(347),n.b),_=a()(r());_.i(s.Z);var b=u()(l),y=u()(p),g=u()(f),v=u()(d),x=u()(m),w=u()(h);_.push([t.id,'.root{max-width:800px;padding:0 40px;width:100%}.comments-add-form__auth-button,.comments-add-form__form,.comments__icon,.form__input_auth,a,button,input,select{transition:.3s}.button,.comments-add-form__auth-button,.comments-add-form__user-name,.comments__user-date,.comments__user-name,.footer__copyright,.header__title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}*{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;-moz-text-size-adjust:100%;font-feature-settings:"kern";box-sizing:border-box;color:#333;font-family:Roboto,Sans-serif;margin:0 auto;padding:0}a{background-color:transparent;text-decoration:none}img{border-style:none}ul{list-style:none}button,input,optgroup,select,textarea{margin:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:0}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[hidden],template{display:none}a,button,input,select{-webkit-tap-highlight-color:rgba(255,255,255,0);-webkit-tap-highlight-color:rgba(0,0,0,0);background:transparent;border:none}a:focus,button:focus,input:focus,select:focus{outline:none}.root{display:grid;grid-template-rows:auto 1fr auto;justify-items:center;min-height:100vh}.root__comments-add-form,.root__header{margin-top:40px}.root__comments{margin-top:80px}.root__footer{margin-top:40px}.header{width:100%}.header__title{font-size:48px;font-weight:700;letter-spacing:0;line-height:56px;max-width:720px}@media(max-width:799px){.header__title{max-width:calc(100vw - 80px)}}.content{align-content:flex-start;display:flex;flex-flow:row wrap;justify-items:center;width:100%}.button{align-items:center;background-color:#64c4ed;border-radius:15px;color:#fff;cursor:pointer;display:grid;font-size:16px;font-weight:700;height:30px;justify-content:center;letter-spacing:0;line-height:20px;max-width:720px;padding:0 20px;text-align:center;width:auto}.button:focus,.button:hover{background-color:#1d9bd2}.button:disabled{background-color:#d9d9d9;color:#f2f2f2;cursor:not-allowed}.button_auth,.button_remove{height:40px;width:100%}.button_remove:hover{background-color:#c90e0e}.button_comments-add-form{max-width:100%;min-width:100px}.comments-add-form{max-height:160px;width:100%}.comments-add-form__form{background-color:#f2f2f2;border:1px solid #d9d9d9;border-radius:10px;padding:20px;width:100%}.comments-add-form__user-container{align-items:center;display:grid;grid-template-columns:repeat(2,auto);justify-content:space-between}.comments-add-form__user-button{align-items:center;-moz-column-gap:10px;column-gap:10px;cursor:pointer;display:grid;grid-template-columns:30px auto;justify-content:start;max-width:580px}.comments-add-form__user-button:focus .comments-add-form__auth-button,.comments-add-form__user-button:hover .comments-add-form__auth-button{color:#1d9bd2}@media(max-width:799px){.comments-add-form__user-button{max-width:calc(100vw - 120px)}}.comments-add-form__user-avatar{background-image:url('+b+");background-position:50%;background-repeat:no-repeat;background-size:30px,30px;background-size:cover;border-radius:50%;height:30px;width:30px}.comments-add-form__user-sign-in{display:block;max-width:100%}.comments-add-form__user-name{font-size:13px;font-weight:700;letter-spacing:0;line-height:16px;max-width:540px}@media(max-width:799px){.comments-add-form__user-name{max-width:calc(100vw - 260px)}}.comments-add-form__auth-button{font-size:12px;font-weight:400;letter-spacing:0;line-height:14px;max-width:540px}@media(max-width:799px){.comments-add-form__auth-button{max-width:calc(100vw - 260px)}}.comments-add-form__textarea{-webkit-appearance:none;background-color:transparent;border:none;height:40px;max-height:120px;outline:none;resize:none;width:100%}.comments{width:100%}.comments__list{display:grid;grid-template-rows:1fr;row-gap:20px}.comments__item{background-color:#f2f2f2;border-radius:10px;display:flex;flex-flow:column nowrap;padding:20px;width:100%}.comments__user-container{align-items:center;-moz-column-gap:10px;column-gap:10px;display:grid;grid-template-columns:30px auto;justify-content:start;width:100%}.comments__user-avatar{background-image:url("+b+");background-position:50%;background-repeat:no-repeat;background-size:30px,30px;background-size:cover;border-radius:50%;height:30px;width:30px}.comments__user-name{font-size:13px;font-weight:700;letter-spacing:0;line-height:16px;max-width:640px}@media(max-width:799px){.comments__user-name{max-width:calc(100vw - 160px)}}.comments__user-date{font-size:13px;font-weight:400;letter-spacing:0;line-height:16px;max-width:640px}@media(max-width:799px){.comments__user-date{max-width:calc(100vw - 160px)}}.comments__text{-webkit-line-clamp:12;-webkit-box-orient:vertical;line-clamp:12;box-orient:vertical;display:-moz-box;display:-webkit-box;font-size:16px;font-weight:500;letter-spacing:0;line-height:24px;margin-top:20px;max-width:680px;overflow:hidden;text-overflow:ellipsis;width:100%}@media(max-width:799px){.comments__text{max-width:calc(100vw - 120px)}}.comments__controls{-moz-column-gap:20px;column-gap:20px;display:grid;grid-template-columns:auto auto;justify-content:end;margin-top:10px;padding-top:10px;width:100%}.comments__control{align-items:center;display:flex;flex-flow:row nowrap}.comments__icon{background-color:transparent;border:0;cursor:pointer;display:flex;height:20px;width:20px}.comments__icon:focus,.comments__icon:hover{opacity:.5;outline:none}.comments__icon_like{background-image:url("+y+");background-position:50%;background-repeat:no-repeat;background-size:20px,18px}.comments__icon_like:active,.comments__icon_liked{background-image:url("+g+");background-position:50%;background-repeat:no-repeat;background-size:20px,18px}.comments__icon_remove{background-image:url("+v+");background-position:50%;background-repeat:no-repeat;background-size:18px,20px}.comments__like-count{border:1px solid #d9d9d9;border-radius:6px;font-size:12px;font-weight:400;letter-spacing:0;line-height:12px;margin-left:10px;padding:5px}.popup{align-items:center;background-color:rgba(0,0,0,.5);display:flex;flex-direction:column;height:100vh;justify-content:center;left:0;opacity:0;position:fixed;top:0;visibility:hidden;width:100%;z-index:9999}.popup_opened{opacity:1;visibility:visible}.popup__container{-webkit-box-shadow-box-shadow:0 0 25px rgba(0,0,0,.15);background-color:#fff;border-radius:10px;-webkit-box-shadow:0 0 25px rgba(0,0,0,.15);display:block;padding:20px;position:relative;width:430px}@media screen and (max-width:547px){.popup__container{width:282px}}.popup__close-button{background-color:transparent;background-image:url("+x+");border:none;cursor:pointer;display:flex;flex-shrink:0;height:20px;position:absolute;right:0;top:-30px;width:20px}.popup__close-button,.popup__close-button:focus,.popup__close-button:hover{background-position:50%;background-repeat:no-repeat;background-size:20px,20px}.popup__close-button:focus,.popup__close-button:hover{background-image:url("+w+')}.form_auth{display:flex;flex-direction:column;width:100%}.form__title{font-size:24px;font-weight:900;letter-spacing:0;line-height:29px}@media screen and (max-width:709px){.form__title{font-size:18px;font-weight:900;letter-spacing:0;line-height:22px}}.form__text{font-size:14px;font-weight:700;letter-spacing:0;line-height:18px;margin-top:20px}.form__input-container{border:0;margin-top:20px;padding:0;width:100%}.form__input_auth{background-color:transparent;border:0;border-bottom:1px solid #333;box-sizing:border-box;display:flex;font-size:14px;font-weight:400;letter-spacing:0;line-height:16px;margin:0 0 30px;padding:6px 0;width:100%}.form__input_auth::-moz-placeholder{color:#333;font-size:14px;font-weight:400;letter-spacing:0;line-height:16px}.form__input_auth:-ms-input-placeholder{color:#333;font-size:14px;font-weight:400;letter-spacing:0;line-height:16px}.form__input_auth::placeholder{color:#333;font-size:14px;font-weight:400;letter-spacing:0;line-height:16px}.form__input_auth:focus,.form__input_auth:hover{border-color:#1d9bd2}.form__input_error{border-bottom:1px solid #c90e0e}.form__input-error{display:none}.form__input-error_active{color:#c90e0e;display:flex;font-size:12px;font-weight:400;height:16px;letter-spacing:0;line-height:16px;margin-bottom:10px;margin-top:-20px}.footer{align-items:center;border-top:1px solid #333;display:flex;flex-flow:row nowrap;justify-content:center;padding:20px 0;width:100%}.footer__copyright{color:#333;display:block;font-size:14px;font-weight:400;letter-spacing:0;line-height:20px;max-width:720px}@media(max-width:799px){.footer__copyright{max-width:calc(100vw - 80px)}}.footer__copyright:before{content:"©";margin-right:10px}',""]);const k=_},944:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var o=n(738),r=n.n(o),i=n(705),a=n.n(i)()(r());a.push([t.id,"@font-face\n    font-family: 'Roboto'\n    src: url('Roboto-Bold.eot')\n    src: local('Roboto Bold'), local('Roboto-Bold')\n    src: url('Roboto-Bold.eot?#iefix') format('embedded-opentype')\n    src: url('Roboto-Bold.woff') format('woff')\n    src: url('Roboto-Bold.ttf') format('truetype')\n    font-weight: bold\n    font-style: normal\n\n@font-face\n    font-family: 'Roboto'\n    src: url('Roboto-Regular.eot')\n    src: local('Roboto'), local('Roboto-Regular')\n    src: url('Roboto-Regular.eot?#iefix') format('embedded-opentype')\n    src: url('Roboto-Regular.woff') format('woff')\n    src: url('Roboto-Regular.ttf') format('truetype')\n    font-weight: normal\n    font-style: normal\n\n@font-face\n    font-family: 'Roboto'\n    src: url('Roboto-Medium.eot')\n    src: local('Roboto Medium'), local('Roboto-Medium')\n    src: url('Roboto-Medium.eot?#iefix') format('embedded-opentype')\n    src: url('Roboto-Medium.woff') format('woff')\n    src: url('Roboto-Medium.ttf') format('truetype')\n    font-weight: 500\n    font-style: normal\n",""]);const s=a},379:t=>{"use strict";var e=[];function n(t){for(var n=-1,o=0;o<e.length;o++)if(e[o].identifier===t){n=o;break}return n}function o(t,o){for(var i={},a=[],s=0;s<t.length;s++){var c=t[s],u=o.base?c[0]+o.base:c[0],l=i[u]||0,p="".concat(u," ").concat(l);i[u]=l+1;var f=n(p),d={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==f)e[f].references++,e[f].updater(d);else{var m=r(d,o);o.byIndex=s,e.splice(s,0,{identifier:p,updater:m,references:1})}a.push(p)}return a}function r(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,r){var i=o(t=t||[],r=r||{});return function(t){t=t||[];for(var a=0;a<i.length;a++){var s=n(i[a]);e[s].references--}for(var c=o(t,r),u=0;u<i.length;u++){var l=n(i[u]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}i=c}}},569:t=>{"use strict";var e={};t.exports=function(t,n){var o=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,r&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(o,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},995:(t,e,n)=>{"use strict";t.exports=n.p+"af4eb1ea72ac087b30b3.svg"},657:(t,e,n)=>{"use strict";t.exports=n.p+"7a1757d64e1388a30617.svg"},215:(t,e,n)=>{"use strict";t.exports=n.p+"5a2a17550987f844e1bb.svg"},347:(t,e,n)=>{"use strict";t.exports=n.p+"ce535150ca8a638ba039.svg"},81:(t,e,n)=>{"use strict";t.exports=n.p+"32fa90db8b093319fa84.svg"},166:(t,e,n)=>{"use strict";t.exports=n.p+"cdc965adef40554254c6.svg"}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={id:o,exports:{}};return t[o](i,i.exports,n),i.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.p="",n.b=document.baseURI||self.location.href,n.nc=void 0,(()=>{"use strict";var t=n(246),e=n.n(t),o=n(379),r=n.n(o),i=n(795),a=n.n(i),s=n(569),c=n.n(s),u=n(565),l=n.n(u),p=n(216),f=n.n(p),d=n(589),m=n.n(d),h=n(567),_={};function b(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}_.styleTagTransform=m(),_.setAttributes=l(),_.insert=c().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=f(),r()(h.Z,_),h.Z&&h.Z.locals&&h.Z.locals;var y=function(){function t(e,n){var o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=o,this._container=document.querySelector(n)}var e,n;return e=t,n=[{key:"renderItems",value:function(t){var e=this;t.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"prepend";"append"===e?this._container.append(t):this._container.prepend(t)}}],n&&b(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function g(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var v=function(){function t(e,n,o,r){var i=r.handleBinClick,a=r.handleLikeClick;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e.id,this._currentUserId=n,this.item=e,this._ownerId=this.item.owner.id,this._name=e.name,this._date=void 0===e.date||""===e.date?new Date:new Date(e.date),this._link=null==e?void 0:e.link,this._text=e.text,this._handleLikeClick=a,this._handleBinClick=i,this._formatDate=o,this._templateSelector="#comment-template",this._commentSelector=".comments__item",this._avatarSelector=".comments__user-avatar",this._nameSelector=".comments__user-name",this._dateSelector=".comments__user-date",this._textSelector=".comments__text",this._binBtnSelector=".comments__icon_remove",this._likeBtnSelector=".comments__icon_like",this._likesCountSelector=".comments__like-count",this._likedClass="comments__icon_liked"}var e,n;return e=t,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(this._commentSelector).cloneNode(!0)}},{key:"_toUpperCase",value:function(t){return t.slice(0,1).toUpperCase()+t.slice(1)}},{key:"_removeElement",value:function(t){t.remove(),t=null}},{key:"_addLikedClass",value:function(){this._likeBtnElement.classList.add(this._likedClass)}},{key:"_removeLikedClass",value:function(){this._likeBtnElement.classList.remove(this._likedClass)}},{key:"_checkId",value:function(){this._ownerId!==this._currentUserId&&this._removeElement(this._binBtnElement)}},{key:"_setEventListeners",value:function(){var t=this;this._likeBtnElement.addEventListener("click",(function(){return t._handleLikeClick(t.item)})),this._binBtnElement.addEventListener("click",(function(){return t._handleBinClick(t)}))}},{key:"isLiked",value:function(){return this._isLiked}},{key:"setLikes",value:function(t){var e=this;this._likeCountElement.textContent=t.likes.length,this._isLiked=t.likes.filter((function(t){return t===e._currentUserId})).length>0,this._isLiked?this._addLikedClass():this._removeLikedClass()}},{key:"generateComment",value:function(){return this._element=this._getTemplate(),this._avatarElement=this._element.querySelector(this._avatarSelector),this._nameElement=this._element.querySelector(this._nameSelector),this._dateElement=this._element.querySelector(this._dateSelector),this._textElement=this._element.querySelector(this._textSelector),this._likeBtnElement=this._element.querySelector(this._likeBtnSelector),this._binBtnElement=this._element.querySelector(this._binBtnSelector),this._likeCountElement=this._element.querySelector(this._likesCountSelector),this._nameElement.textContent=this._toUpperCase(this._name),this._dateElement.textContent=this._formatDate(this._date),this._textElement.textContent=this._text,void 0!==this._link&&""!==this._link&&(this._avatarElement.style.backgroundImage="url(".concat(this._link,")")),this.setLikes(this.item),this._checkId(),this._setEventListeners(),this._element}},{key:"removeComment",value:function(){this._removeElement(this._element)}}])&&g(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function x(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function k(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function E(){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=S(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},E.apply(this,arguments)}function S(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=L(t)););return t}function C(t,e){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},C(t,e)}function O(t,e){if(e&&("object"===w(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return j(t)}function j(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L(t){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},L(t)}var R=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C(t,e)}(a,t);var e,n,o,r,i=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=L(o);if(r){var n=L(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return O(this,t)});function a(t){var e,n=t.selector,o=t.submit;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,n))._submit=o,e._form=e._popup.querySelector(".form"),e._submitEvtHandler=e._submitEvtHandler.bind(j(e)),e}return e=a,(n=[{key:"close",value:function(){E(L(a.prototype),"close",this).call(this),this._form.reset()}}])&&k(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popupSelector=e,this._popup=document.querySelector(this._popupSelector),this._closeButtonClass="popup__close-button",this._popupOpenedClass="popup_opened",this._handleClickClose=this._handleClickClose.bind(this),this._handleEscClose=this._handleEscClose.bind(this)}var e,n;return e=t,(n=[{key:"open",value:function(){this._popup.classList.add(this._popupOpenedClass),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove(this._popupOpenedClass),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleClickClose",value:function(t){(t.target===t.currentTarget||t.target.classList.contains(this._closeButtonClass))&&this.close()}},{key:"_handleEscClose",value:function(t){"Escape"!==t.key&&"Esc"!==t.key||this.close()}},{key:"setEventListeners",value:function(){this._popup.addEventListener("click",this._handleClickClose)}}])&&x(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}());function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function z(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=B(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},I.apply(this,arguments)}function B(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=D(t)););return t}function q(t,e){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},q(t,e)}function T(t,e){if(e&&("object"===P(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function D(t){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},D(t)}var U=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&q(t,e)}(a,t);var e,n,o,r,i=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=D(o);if(r){var n=D(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return T(this,t)});function a(t){var e=t.selector,n=t.submit;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,{selector:e,submit:n})}return e=a,(n=[{key:"_submitEvtHandler",value:function(t){t.preventDefault(),this._submit(this._getInputValues())}},{key:"_getInputValues",value:function(){var t=Array.from(this._form.querySelectorAll(".form__input")),e={};return t.forEach((function(t){e[t.name]=t.value})),e}},{key:"setEventListeners",value:function(){I(D(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",this._submitEvtHandler)}}])&&z(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(R);function M(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var A=function(){function t(e){var n=e.selector,o=e.submit,r=e.getUserData,i=e.ownerId,a=e.uuid;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._formSelector=n,this._form=document.querySelector(this._formSelector),this._submit=o,this._submitEvtHandler=this._submitEvtHandler.bind(this),this._userNameElement=this._form.querySelector(".comments-add-form__user-name"),this._userAvatarElement=this._form.querySelector(".comments-add-form__user-avatar"),this._getUserData=r,this._ownerId=i,this._uuid=a}var e,n;return e=t,(n=[{key:"_submitEvtHandler",value:function(t){t.preventDefault(),this._submit(this._getValues()),this._form.reset()}},{key:"setUserInfo",value:function(t){this._userNameElement.textContent=t.name,""!==t.link&&(this._userAvatarElement.style.backgroundImage="url(".concat(t.link,")"))}},{key:"_getValues",value:function(){var t=Array.from(this._form.querySelectorAll(".comments-add-form__input")),e={},n=this._getUserData();return t.forEach((function(t){e[t.name]=t.value})),e.owner={id:this._ownerId},e.id=this._uuid(),e.likes=[],e.name=n.name,e.date=n.date,e.link=n.link,e}},{key:"setEventListeners",value:function(){this._form.addEventListener("submit",this._submitEvtHandler)}}])&&M(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),V=function(t){var e=t.getDate(),n=t.getMonth()+1,o=t.getFullYear(),r=t.getHours(),i=t.getMinutes(),a=new Date-t,s=Math.round(a/1e3)/60/60;return o=o.toString().slice(-2),n=n<10?"0"+n:n,e=e<10?"0"+e:e,r=r<10?"0"+r:r,i=i<10?"0"+i:i,s<24?"today ".concat(r,":").concat(i):s<48?"yesterday ".concat(r,":").concat(i):"".concat(e,".").concat(n,".").concat(o," ").concat(r,":").concat(i)};function H(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var N=function(){function t(e){var n=this,o=e.selector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._textareaSelector=o,this._textarea=document.querySelector(this._textareaSelector),this._textarea.oninput=function(){n._autoGrow()}}var e,n;return e=t,(n=[{key:"_autoGrow",value:function(){this._textarea.style.height="40px",this._textarea.style.height=this._textarea.scrollHeight+"px"}}])&&H(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Z(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var F=function(){function t(e){var n=e.selector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._formSelector=n,this._form=document.querySelector(this._formSelector),this._inputSelector=".form__input",this._submitButtonSelector=".button__submit",this._inputErrorClass="form__input_error",this._errorClass="form__input-error_active",this._errorPrefix="-error"}var e,n;return e=t,(n=[{key:"_showInputError",value:function(t,e){var n=this._form.querySelector("#".concat(t.id+this._errorPrefix));t.classList.add(this._inputErrorClass),n.textContent=e,n.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(t){var e=this._form.querySelector("#".concat(t.id+this._errorPrefix));t.classList.remove(this._inputErrorClass),e.classList.remove(this._errorClass),e.textContent=""}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput(this._inputList)?this._buttonElement.disabled=!0:this._buttonElement.disabled=!1}},{key:"clearValidation",value:function(){var t=this;this._toggleButtonState(),this._inputList.forEach((function(e){return t._hideInputError(e)}))}},{key:"_setEventListeners",value:function(){var t=this;this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonElement=this._form.querySelector(this._submitButtonSelector),this._toggleButtonState(this._inputList),this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState(t._inputList)}))})),this._form.addEventListener("reset",(function(){t.clearValidation()}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&Z(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function G(t){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G(t)}function Y(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function J(){return J="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=Q(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},J.apply(this,arguments)}function Q(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=W(t)););return t}function $(t,e){return $=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},$(t,e)}function K(t,e){if(e&&("object"===G(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function W(t){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},W(t)}var X=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$(t,e)}(a,t);var e,n,o,r,i=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=W(o);if(r){var n=W(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return K(this,t)});function a(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,t)}return e=a,(n=[{key:"_submitEvtHandler",value:function(){this._submit(this._commentData),this._form.removeEventListener("submit",this._submitEvtHandler)}},{key:"setEventListeners",value:function(){var t=this;J(W(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._submitEvtHandler()}))}},{key:"open",value:function(t){J(W(a.prototype),"open",this).call(this),this._commentData=t}}])&&Y(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(R),tt={id:e()()},et={},nt={name:"Guest",date:new Date},ot=document.querySelector(".comments-add-form__user-button"),rt=document.querySelector(".header__title"),it=document.querySelector(".footer__copyright"),at=function(){return Array.from(document.querySelectorAll(".comments__item"))},st=function(){return at().length<2?0===at().length?"Comments":"".concat(at().length," Comment"):"".concat(at().length," Comments")};function ct(t){ft.open(t)}it.textContent="".concat((new Date).getFullYear()," Artem Mezenov");var ut=new y({renderer:function(t){var e=lt(t);ut.addItem(e,"append")}},".comments__list"),lt=function(t){var e=new v(t,tt.id,V,{handleBinClick:ct,handleLikeClick:function(t){var n=e.isLiked()?function(t,e){var n=t;return n.likes=n.likes.filter((function(t){return t!==e})),n}(t,tt.id):function(t,e){var n=t;return n.likes.push(e),n}(t,tt.id);e.setLikes(n)}});return e.generateComment()},pt=new U({selector:".popup_auth",submit:function(t){pt.close(),dt.setUserInfo(t),et=t}});pt.setEventListeners();var ft=new X({selector:".popup_remove",submit:function(t){t.removeComment(),ft.close(),rt.textContent=st()}});ft.setEventListeners();var dt=new A({selector:".comments-add-form__form",submit:function(t){var e=lt(t);ut.addItem(e,"prepend"),rt.textContent=st()},getUserData:function(){return 0===Object.keys(et).length?nt:et},ownerId:tt.id,uuid:e(),arr:[]});dt.setEventListeners(),ot.addEventListener("click",(function(){pt.open(),mt.clearValidation()})),new N({selector:".comments-add-form__textarea"}),new F({selector:".comments-add-form__form"}).enableValidation();var mt=new F({selector:".form_auth"});mt.enableValidation()})()})();